name: Leftover spaces cleanup

on:
  schedule:
    # Every Sunday at 11PM
    - cron: '0 23 * * 0'

jobs:
  build:
    runs-on: ubuntu-latest
    name: Leftover spaces cleanup 
    steps:
    - uses: actions/checkout@08c6903cd8c0fde910a37f88322edcfb5dd907a8 # v5.0.0

    - name: Set up Go
      uses: actions/setup-go@19bb51245e9c80abacb2e91cc42b33fa478b8639 # v4.2.1
      with:
        go-version: '1.24'

    - name: Run leftover spaces cleanup
      run: go run cmd/test-space-cleaner/main.go
      env:
        MONDOO_API_TOKEN: ${{ secrets.MONDOO_TEST_ORG_TOKEN }}
        MONDOO_ORG_MRN: '//captain.api.mondoo.app/organizations/mondoo-operator-testing'
        MONDOO_GQL_ENDPOINT: 'https://api.mondoo.com/query'


